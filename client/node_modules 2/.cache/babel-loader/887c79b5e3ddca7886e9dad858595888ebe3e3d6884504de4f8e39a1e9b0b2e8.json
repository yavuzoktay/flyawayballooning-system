{"ast":null,"code":"import _objectSpread from\"/Users/yavuzoktay/Documents/FlyAwayBallooning/flyawayballooning-system-backend/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Container,Grid}from\"@mui/material\";import React,{useEffect,useState}from\"react\";import PersonalDetail from\"../components/ProfilePage/PersonalDetail\";import useBooking from\"../api/useBooking\";import usePessanger from\"../api/usePessanger\";import{useParams}from\"react-router-dom\";import AdditionInfo from\"../components/ProfilePage/AdditionInfo\";import CurrentBooking from\"../components/ProfilePage/CurrentBooking\";import useActivity from\"../api/useActivity\";import useVoucher from\"../api/useVoucher\";import PassengerDetail from\"../components/ProfilePage/PassengerDetail\";import Notes from\"../components/ProfilePage/Notes\";import History from\"../components/ProfilePage/History\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const{booking,loading:bookingLoading}=useBooking();const{passenger,loading:passengerLoading}=usePessanger();const{activity,loading:activityLoading}=useActivity();const{voucher,loading:voucherLoading}=useVoucher();const[detail,setDetail]=useState([]);const[bookingNote,setBookingNote]=useState(null);const{booking_id,email}=useParams();// Combine booking and passenger details by booking_id\nuseEffect(()=>{if(!bookingLoading&&!passengerLoading&&!activityLoading&&!voucherLoading){// Find the booking with the matching booking_id\nconst filteredBooking=booking.find(b=>b.booking_id===booking_id);if(filteredBooking){// Filter passengers belonging to the specific booking_id\nconst filteredPassengers=passenger.filter(p=>p.booking_id===booking_id);// Filter Activity \nconst filteredActivity=activity.filter(a=>a.activity_sku===filteredBooking.acitivity_id);// Filter Voucher \nconst filteredVoucher=voucher.filter(v=>v.voucher_ref===filteredBooking.voucher_code);// Combine data\nconst combinedDetails=_objectSpread(_objectSpread({},filteredBooking),{},{passengers:filteredPassengers,activity:filteredActivity,voucher:filteredVoucher});// Update state with the combined details\nsetDetail(combinedDetails);}}// Ensure the dependency array size and order remain constant\n},[booking,passenger,bookingLoading,passengerLoading,booking_id,activityLoading,activity,voucher,voucherLoading]);console.log('detail',detail);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading-wrap\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"PROFILE PAGE\"}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"final-profile-wrap\",style:{marginTop:\"30px\"},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:4,children:[/*#__PURE__*/_jsx(PersonalDetail,{detail:detail,email:email}),/*#__PURE__*/_jsx(AdditionInfo,{detail:detail,bookingNote:bookingNote,setBookingNote:setBookingNote})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:8,children:[/*#__PURE__*/_jsx(CurrentBooking,{detail:detail}),/*#__PURE__*/_jsx(PassengerDetail,{detail:detail}),/*#__PURE__*/_jsx(Notes,{detail:detail}),/*#__PURE__*/_jsx(History,{detail:detail,email:email})]})]})})]})});};export default Profile;","map":{"version":3,"names":["Container","Grid","React","useEffect","useState","PersonalDetail","useBooking","usePessanger","useParams","AdditionInfo","CurrentBooking","useActivity","useVoucher","PassengerDetail","Notes","History","jsx","_jsx","jsxs","_jsxs","Profile","booking","loading","bookingLoading","passenger","passengerLoading","activity","activityLoading","voucher","voucherLoading","detail","setDetail","bookingNote","setBookingNote","booking_id","email","filteredBooking","find","b","filteredPassengers","filter","p","filteredActivity","a","activity_sku","acitivity_id","filteredVoucher","v","voucher_ref","voucher_code","combinedDetails","_objectSpread","passengers","console","log","children","maxWidth","className","style","marginTop","container","spacing","item","xs"],"sources":["/Users/yavuzoktay/Documents/FlyAwayBallooning/flyawayballooning-system-backend/client/src/backend/pages/Profile.jsx"],"sourcesContent":["import { Container, Grid } from \"@mui/material\";\nimport React, { useEffect, useState } from \"react\";\nimport PersonalDetail from \"../components/ProfilePage/PersonalDetail\";\nimport useBooking from \"../api/useBooking\";\nimport usePessanger from \"../api/usePessanger\";\nimport { useParams } from \"react-router-dom\";\nimport AdditionInfo from \"../components/ProfilePage/AdditionInfo\";\nimport CurrentBooking from \"../components/ProfilePage/CurrentBooking\";\nimport useActivity from \"../api/useActivity\";\nimport useVoucher from \"../api/useVoucher\";\nimport PassengerDetail from \"../components/ProfilePage/PassengerDetail\";\nimport Notes from \"../components/ProfilePage/Notes\";\nimport History from \"../components/ProfilePage/History\";\n\nconst Profile = () => {\n    const { booking, loading: bookingLoading } = useBooking();\n    const { passenger, loading: passengerLoading } = usePessanger();\n    const { activity, loading: activityLoading } = useActivity();\n    const { voucher, loading: voucherLoading } = useVoucher();\n    const [detail, setDetail] = useState([]);\n    const [bookingNote, setBookingNote] = useState(null);\n    const { booking_id, email } = useParams();\n    \n\n    // Combine booking and passenger details by booking_id\n    useEffect(() => {\n        if (!bookingLoading && !passengerLoading && !activityLoading && !voucherLoading) {\n            // Find the booking with the matching booking_id\n            const filteredBooking = booking.find((b) => b.booking_id === booking_id);\n            \n            if (filteredBooking) {\n                // Filter passengers belonging to the specific booking_id\n                const filteredPassengers = passenger.filter(\n                    (p) => p.booking_id === booking_id\n                );\n\n                // Filter Activity \n                const filteredActivity = activity.filter((a) => a.activity_sku === filteredBooking.acitivity_id);\n\n                // Filter Voucher \n                const filteredVoucher = voucher.filter((v) => v.voucher_ref === filteredBooking.voucher_code);\n\n                // Combine data\n                const combinedDetails = {\n                    ...filteredBooking,\n                    passengers: filteredPassengers,\n                    activity: filteredActivity,\n                    voucher: filteredVoucher,\n                };\n    \n                // Update state with the combined details\n                setDetail(combinedDetails);\n            }\n        }\n        // Ensure the dependency array size and order remain constant\n    }, [booking, passenger, bookingLoading, passengerLoading, booking_id, activityLoading, activity, voucher, voucherLoading]);\n    \n\n\n\n    console.log('detail', detail);\n\n    return (\n        <div>\n            <Container maxWidth=\"xl\">\n                <div className=\"heading-wrap\">\n                    <h2>PROFILE PAGE</h2>\n                    <hr />\n                </div>\n                <div className=\"final-profile-wrap\" style={{marginTop: \"30px\"}}>\n                    <Grid container spacing={2}>\n                        <Grid item xs={4}>\n                            <PersonalDetail detail={detail} email={email} />\n                            <AdditionInfo detail={detail} bookingNote={bookingNote} setBookingNote={setBookingNote} />\n                        </Grid>\n                        <Grid item xs={8}>\n                            <CurrentBooking detail={detail} />\n                            <PassengerDetail detail={detail} />\n                            <Notes detail={detail} />\n                            <History detail={detail} email={email} />\n                        </Grid>\n                    </Grid>\n                </div>\n            </Container>\n        </div>\n    )\n}\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}